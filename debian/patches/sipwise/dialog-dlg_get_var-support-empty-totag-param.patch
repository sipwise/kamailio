From: Victor Seva <vseva@sipwise.com>
Date: Wed, 12 Apr 2023 10:39:55 +0200
Subject: dialog: dlg_get_var() support early dialogs

to_tag can be empty
---
 src/modules/dialog/dialog.c | 7 +------
 1 file changed, 1 insertion(+), 6 deletions(-)

diff --git a/src/modules/dialog/dialog.c b/src/modules/dialog/dialog.c
index 8f4c806..4dec95a 100644
--- a/src/modules/dialog/dialog.c
+++ b/src/modules/dialog/dialog.c
@@ -1528,7 +1528,7 @@ static str *ki_dlg_get_var_helper(sip_msg_t *msg, str *sc, str *sf, str *st, str
 		LM_ERR("invalid From tag parameter\n");
 		return val;
 	}
-	if(st==NULL || st->s==NULL || st->len == 0) {
+	if(st==NULL) {
 		LM_ERR("invalid To tag parameter\n");
 		return val;
 	}
@@ -1598,11 +1598,6 @@ static int w_dlg_get_var(struct sip_msg *msg, char *ci, char *ft, char *tt, char
 		LM_ERR("unable to get To Tag\n");
 		goto error;
 	}
-	if(st.s==NULL || st.len == 0)
-	{
-		LM_ERR("invalid To tag parameter\n");
-		goto error;
-	}
 	if(fixup_get_svalue(msg, (gparam_p)key, &k)!=0)
 	{
 		LM_ERR("unable to get key name\n");
