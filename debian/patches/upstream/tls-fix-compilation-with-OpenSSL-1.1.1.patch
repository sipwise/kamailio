From: S-P Chan <shihping.chan@gmail.com>
Date: Thu, 4 Jan 2024 21:51:15 +0800
Subject: tls: fix compilation with OpenSSL <= 1.1.1

(cherry-pick from 7111687e1107261bcdd7a9f8cc90959754c93272)
---
 src/modules/tls/tls_init.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/src/modules/tls/tls_init.c b/src/modules/tls/tls_init.c
index 0bc12d3..872fdb2 100644
--- a/src/modules/tls/tls_init.c
+++ b/src/modules/tls/tls_init.c
@@ -769,6 +769,7 @@ int tls_pre_init(void)
  * tls mod pre-init function
  * - executed before any mod_init()
  */
+#if OPENSSL_VERSION_NUMBER >= 0x030000000L
 long tls_h_mod_randctx(void *) {
     do {
         OSSL_LIB_CTX *osslglobal = NULL;
@@ -806,6 +807,7 @@ long tls_h_mod_randctx(void *) {
 
     return 0L;
 }
+#endif
 
 int tls_h_mod_pre_init_f(void)
 {
